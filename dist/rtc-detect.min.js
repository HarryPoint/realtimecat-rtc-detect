!function(e){"use strict";function n(){function n(n,i){var a=e.external||{};for(var r in a)if(n.test(i?a[r]:r))return!0;return!1}var i,a,r,t=(navigator.appVersion,navigator.userAgent),o=navigator.appName,s=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10);-1!=(a=t.indexOf("OPR/"))?(o="Opera",s=t.substring(a+4)):-1!==(a=t.indexOf("Opera"))?(o="Opera",s=t.substring(a+6),-1!==(a=t.indexOf("Version"))&&(s=t.substring(a+8))):-1!==(a=t.indexOf("MSIE"))?(o="IE",s=t.substring(a+5)):-1!==(a=t.indexOf("Chrome"))?(o="Chrome",s=t.substring(a+7)):-1!==(a=t.indexOf("Safari"))?(o="Safari",s=t.substring(a+7),-1!==(a=t.indexOf("Version"))&&(s=t.substring(a+8))):-1!==(a=t.indexOf("Firefox"))?(o="Firefox",s=t.substring(a+8)):(i=t.lastIndexOf(" ")+1)<(a=t.lastIndexOf("/"))&&(o=t.substring(i,a),s=t.substring(a+1),o.toLowerCase()===o.toUpperCase()&&(o=navigator.appName));var u=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob),c=/QQBrowser/.test(navigator.userAgent),v=/MetaSr/.test(navigator.userAgent),g=/BIDUBrowser/.test(navigator.userAgent),p=n(/^liebao/i,0);return u&&(o="Edge",s=parseInt(navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)[2],10).toString()),c&&(o="QQ",s=parseInt(navigator.userAgent.match(/QQBrowser\/(\d+).(\d+)/)[2],10).toString()),v&&(o="Sougou",s=parseInt(navigator.userAgent.match(/MetaSr (\d+).(\d+)/)[2],10).toString()),g&&(o="Baidu",s=parseInt(navigator.userAgent.match(/BIDUBrowser\/(\d+).(\d+)/)[2],10).toString()),p&&(o="Liebao",s=""),-1!==(r=s.indexOf(";"))&&(s=s.substring(0,r)),-1!==(r=s.indexOf(" "))&&(s=s.substring(0,r)),d=parseInt(""+s,10),isNaN(d)&&(s=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10)),{fullVersion:s,version:d,name:o}}function i(){var e="Unknown OS",n={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.Android()||n.BlackBerry()||n.iOS()||n.Opera()||n.Windows()},getOsName:function(){var e="Unknown OS";return n.Android()&&(e="Android"),n.BlackBerry()&&(e="BlackBerry"),n.iOS()&&(e="iOS"),n.Opera()&&(e="Opera Mini"),n.Windows()&&(e="Windows"),e}};return n.any()?e=n.getOsName():(-1!==navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(e="OSX"),-1!==navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(e="Linux")),e}function a(n){if(!navigator.enumerateDevices&&e.MediaStreamTrack&&e.MediaStreamTrack.getSources&&(navigator.enumerateDevices=e.MediaStreamTrack.getSources.bind(e.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.enumerateDevices&&(navigator.enumerateDevices=navigator.enumerateDevices.bind(navigator)),!navigator.enumerateDevices){if("undefined"!=typeof v&&(v.MediaDevices=s,v.hasMicrophone=d,v.hasSpeakers=u,v.hasWebcam=c),!n)throw new Error("您的浏览器尚不支持检测设备的方法, Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.");return void n(new Error("您的浏览器尚不支持检测设备的方法, Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available."))}s=[],navigator.enumerateDevices(function(e){e.forEach(function(e){var n={};for(var i in e)n[i]=e[i];"audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput");var a;s.forEach(function(e){e.id===n.id&&e.kind===n.kind&&(a=!0)}),a||(n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label||(n.label="Please invoke getUserMedia once.",g||(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(d=!0),"audiooutput"===n.kind&&(u=!0),"videoinput"===n.kind&&(c=!0),s.push(n))}),"undefined"!=typeof v&&(v.MediaDevices=s,v.hasMicrophone=d,v.hasSpeakers=u,v.hasWebcam=c),n&&n(null)})}function r(){var e=!1;return"undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia),navigator.getUserMedia?e=!0:navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(e=!0),e}function t(){var n=!1;return["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection"].forEach(function(i){n||i in e&&(n=!0)}),n}function o(){var n=!1;return e.RTCPeerConnection=e.RTCPeerConnection||e.webkitRTCPeerConnection||e.mozRTCPeerConnection,e.RTCSessionDescription=e.RTCSessionDescription||e.webkitRTCSessionDescription||e.mozRTCSessionDescription,e.RTCIceCandidate=e.RTCIceCandidate||e.webkitRTCIceCandidate||e.mozRTCIceCandidate,function(){if(e.webkitRTCPeerConnection){var i,a=new e.RTCPeerConnection({iceServers:[{url:"stun:stunserver.org:3478"}]},{optional:[{RtpDataChannels:!0}]});a&&a.createDataChannel&&(i=a.createDataChannel("testDataChannel",{reliable:!1}),i&&(n=!0,i.close())),a.close()}else n=void 0!==e.RTCPeerConnection&&void 0!==e.DataChannel}(),n}var s=[],d=!1,u=!1,c=!1;navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});var v=e.RTCDetect={},g="https:"===location.protocol;v.browser=n(),v.browser["is"+v.browser.name]=!0,v.osName=i(),v.getUserMediaSupport=r(),v.browser.isChrome&&v.browser.version>=46&&!g&&(v.getUserMediaSupport="Requires HTTPs"),v.RTCPeerConnectionSupport=t(),v.dataChannelSupport=o(),v.ORTCSupport="undefined"!=typeof RTCIceGatherer,v.init=function(e){a(e)}}(window);